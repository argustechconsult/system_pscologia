{"version":3,"sources":["../../../../context/AppContext.tsx","../../../../pages/_app.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  ReactNode,\n} from 'react';\nimport {\n  Client,\n  Appointment,\n  FinancialRecord,\n  KanbanTask,\n  SessionReport,\n  GlobalSettings,\n} from '../types';\n\ninterface AppContextType {\n  isAuthenticated: boolean;\n  login: () => void;\n  logout: () => void;\n  clients: Client[];\n  setClients: React.Dispatch<React.SetStateAction<Client[]>>;\n  appointments: Appointment[];\n  setAppointments: React.Dispatch<React.SetStateAction<Appointment[]>>;\n  sessionReports: SessionReport[];\n  setSessionReports: React.Dispatch<React.SetStateAction<SessionReport[]>>;\n  finances: FinancialRecord[];\n  setFinances: React.Dispatch<React.SetStateAction<FinancialRecord[]>>;\n  kanbanTasks: KanbanTask[];\n  setKanbanTasks: React.Dispatch<React.SetStateAction<KanbanTask[]>>;\n  settings: GlobalSettings;\n  setSettings: React.Dispatch<React.SetStateAction<GlobalSettings>>;\n  registerNewBooking: (\n    clientData: { name: string; email: string; phone: string },\n    appointmentData: { date: string; time: string },\n  ) => Appointment;\n}\n\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport const AppProvider: React.FC<{ children: ReactNode }> = ({\n  children,\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n\n  // Initialize state only on client-side to avoid hydration mismatch\n  useEffect(() => {\n    const auth = localStorage.getItem('soraia_auth') === 'true';\n    setIsAuthenticated(auth);\n  }, []);\n\n  const [settings, setSettings] = useState<GlobalSettings>({\n    defaultPrice: 250,\n    defaultDuration: 50,\n  });\n  const [clients, setClients] = useState<Client[]>([]);\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [sessionReports, setSessionReports] = useState<SessionReport[]>([]);\n  const [finances, setFinances] = useState<FinancialRecord[]>([]);\n  const [kanbanTasks, setKanbanTasks] = useState<KanbanTask[]>([]);\n\n  // Load initial data\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('soraia_settings');\n    if (savedSettings) setSettings(JSON.parse(savedSettings));\n\n    const savedClients = localStorage.getItem('soraia_clients');\n    if (savedClients) {\n      setClients(JSON.parse(savedClients));\n    } else {\n      setClients([\n        {\n          id: '1',\n          name: 'João Silva',\n          address: 'Rua das Flores, 123',\n          phone: '2199999999',\n          email: 'joao@email.com',\n          status: 'active',\n          treatmentStage: 'In Treatment',\n          lastSessionDate: '2023-10-20',\n        },\n        {\n          id: '2',\n          name: 'Maria Souza',\n          address: 'Av. Paulista, 1000',\n          phone: '2198888888',\n          email: 'maria@email.com',\n          status: 'inactive',\n          treatmentStage: 'Evaluation',\n          lastSessionDate: '2023-08-15',\n        },\n      ]);\n    }\n\n    const savedAppointments = localStorage.getItem('soraia_appointments');\n    if (savedAppointments) {\n      setAppointments(JSON.parse(savedAppointments));\n    } else {\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      const tomorrowStr = tomorrow.toISOString().split('T')[0];\n\n      setAppointments([\n        {\n          id: 'app-joao-1',\n          clientId: '1',\n          date: tomorrowStr,\n          time: '14:00',\n          type: 'Clinical',\n          status: 'scheduled',\n          meetLink: 'https://meet.google.com/soraia-joao-session',\n          price: 250,\n          duration: 50,\n        },\n        {\n          id: 'app-maria-prev',\n          clientId: '2',\n          date: '2023-08-15',\n          time: '10:00',\n          type: 'Neuropsychology',\n          status: 'completed',\n          price: 450,\n          duration: 90,\n        },\n      ]);\n    }\n\n    const savedReports = localStorage.getItem('soraia_reports');\n    if (savedReports) setSessionReports(JSON.parse(savedReports));\n\n    const savedFinances = localStorage.getItem('soraia_finances');\n    if (savedFinances) setFinances(JSON.parse(savedFinances));\n\n    const savedKanban = localStorage.getItem('soraia_kanban');\n    if (savedKanban) {\n      setKanbanTasks(JSON.parse(savedKanban));\n    } else {\n      setKanbanTasks([\n        { id: 'k1', title: 'Análise de Testes - João', status: 'doing' },\n        { id: 'k2', title: 'Relatório Final - Maria', status: 'todo' },\n      ]);\n    }\n  }, []);\n\n  // Save changes\n  useEffect(() => {\n    if (clients.length > 0)\n      localStorage.setItem('soraia_clients', JSON.stringify(clients));\n  }, [clients]);\n\n  useEffect(() => {\n    if (appointments.length > 0)\n      localStorage.setItem('soraia_appointments', JSON.stringify(appointments));\n  }, [appointments]);\n\n  useEffect(() => {\n    if (sessionReports.length > 0)\n      localStorage.setItem('soraia_reports', JSON.stringify(sessionReports));\n  }, [sessionReports]);\n\n  useEffect(() => {\n    if (finances.length > 0)\n      localStorage.setItem('soraia_finances', JSON.stringify(finances));\n  }, [finances]);\n\n  useEffect(() => {\n    if (kanbanTasks.length > 0)\n      localStorage.setItem('soraia_kanban', JSON.stringify(kanbanTasks));\n  }, [kanbanTasks]);\n\n  useEffect(() => {\n    localStorage.setItem('soraia_settings', JSON.stringify(settings));\n  }, [settings]);\n\n  const login = () => {\n    setIsAuthenticated(true);\n    localStorage.setItem('soraia_auth', 'true');\n  };\n\n  const logout = () => {\n    setIsAuthenticated(false);\n    localStorage.removeItem('soraia_auth');\n  };\n\n  const registerNewBooking = (\n    clientData: { name: string; email: string; phone: string },\n    appointmentData: { date: string; time: string },\n  ) => {\n    let existingClient = clients.find(\n      (c) => c.email.toLowerCase() === clientData.email.toLowerCase(),\n    );\n    let clientId = '';\n\n    if (!existingClient) {\n      clientId = Date.now().toString();\n      const newClient: Client = {\n        id: clientId,\n        name: clientData.name,\n        email: clientData.email,\n        phone: clientData.phone,\n        address: 'Pendente',\n        status: 'pending',\n        treatmentStage: 'First Contact',\n      };\n      setClients((prev) => [...prev, newClient]);\n    } else {\n      clientId = existingClient.id;\n    }\n\n    const price = settings.defaultPrice;\n    const duration = settings.defaultDuration;\n\n    const newAppointment: Appointment = {\n      id: `app-${Date.now()}`,\n      clientId: clientId,\n      date: appointmentData.date,\n      time: appointmentData.time,\n      type: 'Clinical',\n      status: 'scheduled',\n      meetLink: `https://meet.google.com/soraia-${Math.random()\n        .toString(36)\n        .substring(7)}`,\n      price: price,\n      duration: duration,\n    };\n\n    setAppointments((prev) => [...prev, newAppointment]);\n\n    const newFinancialRecord: FinancialRecord = {\n      id: `f-${Date.now()}`,\n      description: `Agendamento Online - ${clientData.name}`,\n      amount: price,\n      type: 'income',\n      date: appointmentData.date,\n      category: 'Atendimento',\n    };\n    setFinances((prev) => [...prev, newFinancialRecord]);\n\n    return newAppointment;\n  };\n\n  return (\n    <AppContext.Provider\n      value={{\n        isAuthenticated,\n        login,\n        logout,\n        clients,\n        setClients,\n        appointments,\n        setAppointments,\n        sessionReports,\n        setSessionReports,\n        finances,\n        setFinances,\n        kanbanTasks,\n        setKanbanTasks,\n        settings,\n        setSettings,\n        registerNewBooking,\n      }}\n    >\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport const useApp = () => {\n  const context = useContext(AppContext);\n  if (!context) throw new Error('useApp must be used within AppProvider');\n  return context;\n};\n","import type { AppProps } from 'next/app';\nimport { AppProvider } from '../context/AppContext';\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <AppProvider>\n      <Component {...pageProps} />\n    </AppProvider>\n  );\n}\n\nexport default MyApp;\n"],"names":[],"mappings":"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"}