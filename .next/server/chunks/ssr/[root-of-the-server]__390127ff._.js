module.exports=[40175,(a,b,c)=>{"use strict";b.exports=a.r(1951).vendored.contexts.HeadManagerContext},42939,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},14619,a=>{"use strict";let b=(0,a.i(64375).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],14619)},6766,a=>{"use strict";let b=(0,a.i(64375).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],6766)},59426,23028,52519,99987,a=>{"use strict";var b=a.i(8171),c=a.i(41910),d=a.i(1257),e=a.i(64375);let f=(0,e.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),g=(0,e.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>g],23028);var h=a.i(14619);let i=(0,e.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>i],52519);let j=(0,e.default)("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);var k=a.i(6766);let l=(0,e.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),m=(0,e.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>m],99987),a.s(["default",0,({onLogout:a,children:e})=>{let n=(0,c.useRouter)(),o=({href:a,icon:c,label:e,exact:f=!1})=>{let g=f?n.pathname===a:n.pathname===a||n.pathname.startsWith(`${a}/`);return(0,b.jsxs)(d.default,{href:a,className:`flex items-center gap-3 px-5 py-3.5 rounded-2xl transition-all font-semibold ${g?"bg-teal-600 text-white shadow-lg shadow-teal-900/40":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[(0,b.jsx)(c,{size:20})," ",e]})};return(0,b.jsxs)("div",{className:"flex h-screen bg-slate-100 overflow-hidden font-sans",children:[(0,b.jsxs)("aside",{className:"w-64 bg-slate-900 text-white flex flex-col shrink-0 shadow-2xl",children:[(0,b.jsxs)("div",{className:"p-8 border-b border-white/5",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Soraia"}),(0,b.jsx)("p",{className:"text-[9px] text-teal-400 uppercase tracking-[0.3em] font-black mt-1",children:"Neuropsicologia"})]}),(0,b.jsxs)("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto",children:[(0,b.jsx)(o,{href:"/admin",icon:f,label:"Dashboard",exact:!0}),(0,b.jsx)(o,{href:"/admin/clients",icon:g,label:"Clientes"}),(0,b.jsx)(o,{href:"/admin/schedule",icon:h.Calendar,label:"Agendamento"}),(0,b.jsx)(o,{href:"/admin/reports",icon:m,label:"Relato de Sessão"}),(0,b.jsx)(o,{href:"/admin/kanban",icon:j,label:"Kanban"}),(0,b.jsx)(o,{href:"/admin/finance",icon:i,label:"Financeiro"}),(0,b.jsx)(o,{href:"/admin/retention",icon:k.RefreshCw,label:"Retenção"})]}),(0,b.jsx)("div",{className:"p-6 border-t border-white/5",children:(0,b.jsxs)("button",{onClick:()=>{a(),n.push("/")},className:"w-full flex items-center justify-center gap-3 px-5 py-4 text-red-400 hover:bg-red-500/10 rounded-2xl transition-all font-bold border border-red-500/20",children:[(0,b.jsx)(l,{size:20})," Encerrar Sessão"]})})]}),(0,b.jsxs)("main",{className:"flex-1 overflow-y-auto bg-slate-50",children:[(0,b.jsxs)("header",{className:"h-20 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 flex items-center justify-between sticky top-0 z-10 shadow-sm",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Seja bem-vinda, Soraia!"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-slate-900",children:"Soraia Rodrigues"}),(0,b.jsx)("p",{className:"text-[10px] text-teal-600 font-bold uppercase tracking-wider",children:"Psicóloga & Neuropsicóloga"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:"https://picsum.photos/seed/soraia/100",className:"w-11 h-11 rounded-full border-2 border-teal-500 shadow-lg p-0.5",alt:"Soraia"}),(0,b.jsx)("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]})]})]}),(0,b.jsx)("div",{className:"p-8 max-w-[1600px] mx-auto",children:e})]})]})}],59426)},39890,a=>{"use strict";let b=(0,a.i(64375).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],39890)},36028,a=>{"use strict";let b=(0,a.i(64375).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],36028)},78819,a=>a.a(async(b,c)=>{try{let b=await a.y("@google/genai-99c062f451b6fa7c");a.n(b),c()}catch(a){c(a)}},!0),57814,a=>a.a(async(b,c)=>{try{var d=a.i(78819),e=b([d]);[d]=e.then?(await e)():e;let f=new d.GoogleGenAI({apiKey:process.env.API_KEY}),g=async(a,b)=>{let c=`Escreva uma mensagem curta, acolhedora e profissional para o WhatsApp/Email de um paciente chamado ${a} que n\xe3o comparece a uma sess\xe3o desde ${b||"algum tempo"}. O objetivo \xe9 demonstrar preocupa\xe7\xe3o com o bem-estar dele e oferecer uma nova consulta de forma gentil, sem pressionar. A profissional \xe9 Soraia, Psic\xf3loga Cl\xednica e Neuropsic\xf3loga. Mantenha o tom emp\xe1tico.`;try{return(await f.models.generateContent({model:"gemini-3-flash-preview",contents:c})).text}catch(b){return console.error("Gemini Error:",b),`Ol\xe1 ${a}, como voc\xea est\xe1? Notei que faz um tempo que n\xe3o nos vemos. Gostaria de saber se est\xe1 tudo bem e se gostaria de agendar um novo hor\xe1rio. Abra\xe7os, Soraia.`}},h=async(a,b,c,d)=>{let e=`Escreva uma mensagem de confirma\xe7\xe3o de agendamento de consulta para o paciente ${a}. 
  Data: ${b} \xe0s ${c}. 
  Link da sess\xe3o: ${d}. 
  A profissional \xe9 Soraia, Psic\xf3loga Cl\xednica e Neuropsic\xf3loga. 
  A mensagem deve ser profissional, acolhedora e instruir o paciente a clicar no link no hor\xe1rio da sess\xe3o.`;try{return(await f.models.generateContent({model:"gemini-3-flash-preview",contents:e})).text}catch(e){return`Ol\xe1 ${a}, sua consulta com a Dra. Soraia est\xe1 confirmada para ${b} \xe0s ${c}. Link: ${d}. At\xe9 l\xe1!`}};a.s(["generateConfirmationMessage",0,h,"generateRetentionMessage",0,g]),c()}catch(a){c(a)}},!1),37007,a=>{"use strict";let b=(0,a.i(64375).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],37007)},25487,a=>{"use strict";let b=(0,a.i(64375).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],25487)},78199,a=>{"use strict";let b=(0,a.i(64375).default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);a.s(["UserX",()=>b],78199)},88477,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(6766),g=a.i(37007),h=a.i(39890),i=a.i(25487),j=a.i(78199),k=a.i(36028),l=a.i(57814),m=b([l]);[l]=m.then?(await m)():m,a.s(["default",0,({clients:a})=>{let[b,c]=(0,e.useState)(null),[m,n]=(0,e.useState)(null),o=(0,e.useMemo)(()=>{let b=new Date;return a.filter(a=>{if("inactive"===a.status)return!0;if(!a.lastSessionDate)return!1;let c=new Date(a.lastSessionDate),d=Math.abs(b.getTime()-c.getTime());return Math.ceil(d/864e5)>60})},[a]),p=async a=>{c(a.id);let b=await (0,l.generateRetentionMessage)(a.name,a.lastSessionDate);n({clientId:a.id,message:b||""}),c(null)};return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Ferramenta de Retenção"}),(0,d.jsx)("p",{className:"text-slate-500",children:"Recupere pacientes que deixaram de se consultar recentemente."})]}),(0,d.jsxs)("div",{className:"bg-blue-50 px-4 py-2 rounded-xl flex items-center gap-2 text-blue-600 font-bold border border-blue-100",children:[(0,d.jsx)(j.UserX,{size:18}),o.length," Pacientes Inativos"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[(0,d.jsx)(k.AlertCircle,{size:20,className:"text-orange-500"})," Pacientes para Contato"]}),(0,d.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-100 divide-y divide-slate-50",children:[o.map(a=>(0,d.jsxs)("div",{className:`p-6 flex items-center justify-between hover:bg-slate-50 transition-all ${m?.clientId===a.id?"bg-teal-50":""}`,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-slate-900",children:a.name}),(0,d.jsxs)("p",{className:"text-xs text-slate-500",children:["Última sessão: ",a.lastSessionDate||"Sem registro"]})]}),(0,d.jsxs)("button",{onClick:()=>p(a),disabled:b===a.id,className:"bg-white border border-slate-200 px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:border-teal-500 hover:text-teal-600 transition-all flex items-center gap-2 disabled:opacity-50",children:[b===a.id?(0,d.jsx)(f.RefreshCw,{size:16,className:"animate-spin"}):(0,d.jsx)(i.Sparkles,{size:16,className:"text-teal-500"}),"Gerar Mensagem IA"]})]},a.id)),0===o.length&&(0,d.jsx)("div",{className:"p-12 text-center text-slate-400 italic",children:"Todos os seus pacientes estão em dia! Parabéns pelo excelente trabalho de retenção."})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2 mb-4",children:[(0,d.jsx)(g.MessageCircle,{size:20,className:"text-teal-500"})," Sugestão de Mensagem"]}),m?(0,d.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-teal-100 p-8 space-y-6 animate-fade-in",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center text-teal-600",children:(0,d.jsx)(i.Sparkles,{size:20})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-slate-800",children:"IA Soraia Assistent"}),(0,d.jsx)("p",{className:"text-xs text-slate-500",children:"Mensagem personalizada gerada agora"})]})]}),(0,d.jsx)("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 relative",children:(0,d.jsxs)("p",{className:"text-slate-800 leading-relaxed italic",children:['"',m.message,'"']})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,d.jsxs)("button",{onClick:()=>{var b,c;let d,e=a.find(a=>a.id===m.clientId);e&&(b=e.phone,c=m.message,d=encodeURIComponent(c),window.open(`https://wa.me/${b.replace(/\D/g,"")}?text=${d}`,"_blank"))},className:"flex-1 bg-green-500 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-green-600 transition-all shadow-lg shadow-green-100",children:[(0,d.jsx)(g.MessageCircle,{size:20})," Enviar WhatsApp"]}),(0,d.jsxs)("button",{className:"flex-1 bg-slate-900 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-slate-800 transition-all",children:[(0,d.jsx)(h.Mail,{size:20})," Enviar E-mail"]})]})]}):(0,d.jsxs)("div",{className:"bg-slate-100/50 rounded-3xl border-2 border-dashed border-slate-200 p-12 text-center text-slate-400",children:[(0,d.jsx)(i.Sparkles,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,d.jsx)("p",{children:"Selecione um paciente ao lado para gerar uma mensagem personalizada de reativação usando Inteligência Artificial."})]})]})]})]})}]),c()}catch(a){c(a)}},!1),82030,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(59426),f=a.i(88477),g=a.i(91528),h=b([f]);function i(){let{clients:a,logout:b}=(0,g.useApp)();return(0,d.jsx)(e.default,{onLogout:b,children:(0,d.jsx)(f.default,{clients:a})})}[f]=h.then?(await h)():h,a.s(["default",()=>i]),c()}catch(a){c(a)}},!1),36021,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(20935),h=a.i(67298),i=a.i(82030),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/retention",pathname:"/admin/retention",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/retention",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__390127ff._.js.map